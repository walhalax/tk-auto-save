# エージェント運用ルール

このプロジェクトで作業するすべてのエージェントは、以下のルールを**絶対**に遵守しなければなりません。

1. **ルールファイルの管理:**
    * このルールファイル (`rules.md`) は**絶対に削除しないでください**。
    * ルール遵守の徹底:毎回の指示実行前に、必ずこの `rules.md` を読み込み、全ルールを遵守してください。
    * これらのルールへの変更や追加は、ユーザーの指示に基づいてこのファイルに追記することによって行うことができます。

2. **ワークスペースの整合性と仕様保全:**
    * 現在の作業フォルダの場所とファイル/フォルダ構造を維持してください。
    * ユーザーから明確な再構築の指示がない限り、プロジェクトのファイルやフォルダを別の場所に移動しないでください。
    * 大規模な再構築が要求された場合は、初期状態を記録してください。
    * プロジェクトの必要部材や仕様、くわえてディレクトリ構成やフローチャートなどの記載を、`requirementmd.md`に記録してください。

3. **コードの清浄性とルール遵守:**
    * **開発用コメントの禁止:** 最終的なコード内に、デバッグ目的や一時的なメモなどの開発用コメントを残さないでください。特に `{/* */}` 形式のコメントは**絶対に使用しないでください**。`// ...` や `console.log(...)` 等も同様です。ただし、コードの意図を説明するための永続的なコメントは許可されます。
    * **`write_to_file` 実行前の検証:** `write_to_file` ツールを使用する際は、送信する `content` パラメータに不要な開発用コメントが含まれていないか、**必ず機械的および目視による最終確認を行ってください**。

4. **エラー回避:**
    * AIエージェントの処理負荷や制限によるエラーを回避するために、ファイル内のコードが大きくなりすぎないようモジュール単位でファイルを分割してください。また、同じ処理を3回以上繰り返す場合にはエラーと判断し、いったん処理を止めて現状を再確認してください。ステップを踏んで進行する際にはステップごとに作業を区切り、処理量に対するエラーが発生しないようにしてください。

5. **バージョン管理 (Git):**
    * すべての重要な変更に対してGitを使用してください。
    * 個別のタスクまたは論理的な作業単位が完了するたびに変更をコミットしてください。
    * コミットメッセージには、行われた変更を明確かつ具体的に記述してください。
    * ユーザーの指示があれば、N個前のタスクの状態にロールバックできるように準備してください。これを容易にするために、明確な履歴を維持してください。
    * ユーザーからの作業指示を実行し、関連する変更をコミットした後、**必ず**リモートリポジトリ (`origin/main` または指定されたブランチ) にプッシュ（デプロイ）してください

6. **デプロイメント:**
    * アプリを作成する場合にはユーザーにデプロイ方法(WebアプリであればNetlify,Streamlit,cloudflare pagesなど)を確認し、最終的にどのような形式での利用を想定しているのかについても確認してから作業を開始してください。
    * スマートフォンアプリを完成させる前には、ウェブアプリとして動作確認を行う必要があります。
    * スマートフォンアプリ動作確認のために現在の状態をGitにプッシュし、確実にプッシュが完了した事が確認できてから、Cloudflare pagesなどのWebサーバーサービスを使用してウェブアプリとしてデプロイしてください。どのサービスを利用するかはその都度ユーザーに問い合わせてください。
    * デプロイされた成果物をユーザーに確認し、承認があればスマートフォンアプリとしての開発のステップに戻って進めてください。

7. **仮想環境:**
    * プロジェクトでpythonコードを利用する場合には、必ず開発環境に仮想環境(venv)を用意してからライブラリを追加したり実行してください。




